<ion-header mode="ios" [translucent]="false" class="ion-no-border">
  <ion-toolbar color="false" class="bg-background">
    <div class="w-full flex justify-between px-4 py-5">
      <!-- <span (click)="goBack()" class="material-icons headerBackArrow" style="color: #FFF;">
        keyboard_backspace
      </span> -->
      <ion-text class="flex-1 text-primary-foreground text-2xl text-ellipsis line-clamp-1 font-semibold text-center">
        Nueva oferta
      </ion-text>
      <!-- <ion-text style="max-width: 80%; -webkit-line-clamp: 1; text-align: left; position: absolute; right: 0;">
        <ion-menu-button menu="sidebarMenuCourses" class="menu-button-custom" color="whiteColor" style="font-size: 30px"></ion-menu-button>
      </ion-text> -->
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div #ScrollContainer class="w-full px-4 flex-1 flex flex-col gap-4 max-h-full overflow-y-auto text-center">

    <div class="w-full flex flex-col gap-2 text-start">
      <ion-text class="text-sm ml-5 text-primary-foreground"> Título de la oferta
      </ion-text>
      <ion-chip class="field">
        <ion-input mode="ios" placeholder="Introduce el título de la oferta" [(ngModel)]="title">
        </ion-input>
      </ion-chip>
      <ion-text color="danger" style="margin-left:20px;" *ngIf="!title && showErrorMessage">Este campo es
        obligatorio</ion-text>
    </div>


    <div class="w-full flex flex-col gap-2 text-start">
      <ion-text class="text-sm ml-5 text-primary-foreground">Horario de trabajo
      </ion-text>
      <ion-chip id="open-work-time-dialog" class="field">
        <ion-input [readonly]="true" mode="ios" type="text" placeholder="Horario de trabajo" class="cursor-pointer"
          [(ngModel)]="type_time">
        </ion-input>
        <span class="material-icons text-primary-foreground absolute top-2/4 -translate-y-2/4 right-1">
          arrow_drop_down
        </span>
      </ion-chip>
      <ion-text color="danger" style="margin-left:20px;" *ngIf="!type_time && showErrorMessage">Este campo es
        obligatorio</ion-text>
    </div>


    <div class="w-full flex flex-col gap-2 text-start">
      <ion-text class="text-sm ml-5 text-primary-foreground"> Salario de la oferta
      </ion-text>
      <ion-chip class="field">
        <ion-input mode="ios" type="text" placeholder="Salario" [(ngModel)]="amount" (ionChange)="formatAmount()">
        </ion-input>

      </ion-chip>
      <ion-text color="danger" style="margin-left:20px;" *ngIf="!amount && showErrorMessage">Este campo es
        obligatorio</ion-text>
    </div>


    <div class="w-full flex flex-col gap-2 text-start">
      <ion-text class="text-sm ml-5 text-primary-foreground"> Ubicación </ion-text>
      <ion-chip class="field">
        <ion-input mode="ios" type="text" placeholder="Introduce la ubicación" [(ngModel)]="location">
        </ion-input>
      </ion-chip>
    </div>

    <div class="w-full flex flex-col gap-2 text-start">
      <ion-text class="text-sm ml-5 text-primary-foreground"> Descripción </ion-text>
      <ion-chip class="field">
        <ion-input mode="ios" type="text" placeholder="Introduce la descripción" [(ngModel)]="description">
        </ion-input>
      </ion-chip>
    </div>


    <div class="w-full flex flex-col gap-2 text-start">
      <ion-text class="text-sm ml-5 text-primary-foreground"> Requerimientos
      </ion-text>
      <ion-chip class="field">
        <ion-input mode="ios" type="text" placeholder="Introduce los requerimientos" [(ngModel)]="newItem"
          (keyup.enter)="addItemToList()">
        </ion-input>
      </ion-chip>
    </div>
    <div class="px-3 flex flex-wrap gap-1">
      <ion-chip class="bg-foreground flex items-center gap-1 max-w-max" *ngFor="let item of requeriment">
        <ion-label class="text-destructive text-sm">{{ item }}</ion-label>
        <ion-icon name="close-circle" (click)="removeItem(item)" class="text-primary"></ion-icon>
      </ion-chip>
    </div>
  </div>

  <ion-modal #workTimeDialog mode="ios" trigger="open-work-time-dialog" style="--height: auto; --width: 100%;">
    <ng-template>
      <div class="bg-muted flex flex-col justify-center items-center gap-y-8 rounded-xl px-4 py-5 mx-4">
        <ion-radio-group value="Tiempo completo" class="w-full flex flex-col gap-3 text-primary-foreground"
          (ionChange)="setWorktypeTime($event.detail.value)">
          <ion-radio mode="md" value="Tiempo completo" justify="start" labelPlacement="end" aria-label="Complete Time"
            class="block">Tiempo
            completo</ion-radio>
          <ion-radio mode="md" value="Medio tiempo" justify="start" labelPlacement="end" aria-label="Part Time"
            class="block">Medio
            Tiempo</ion-radio>
          <ion-radio mode="md" value="Freelance" justify="start" labelPlacement="end" aria-label="Freelance"
            class="block">Freelance</ion-radio>
        </ion-radio-group>

        <div class="w-full flex gap-2 justify-end items-center">
          <ion-chip
            class="text-primary-foreground  text-lg flex justify-center items-center font-medium bg-transparent px-4">
            <ion-text (click)="workTimeDialog.dismiss()">
              Cancelar
            </ion-text>
          </ion-chip>
          <ion-chip
            class="text-primary-foreground bg-primary text-lg h-12 rounded-3xl py-4 px-6 flex justify-center items-center"
            (click)="workTimeDialog.dismiss()">
            <ion-text>
              Seleccionar
            </ion-text>
          </ion-chip>
        </div>
      </div>
    </ng-template>
  </ion-modal>
</ion-content>

<ion-footer mode="ios" class="bg-background px-5">
  <ion-chip [disabled]="isSubmitting" class="customChip mx-2 mb-4 mt-5" (click)="saveNewRecord()"
    style="background-color: #2758BF; color: #ffffff; border: none; height: 50px; display: flex; justify-content: center; align-items: center;">
    <ion-text class="textAux" style="font-size: 16px;">
      {{isSubmitting?'Creando...': 'Crear'}}
    </ion-text>
  </ion-chip>
</ion-footer>