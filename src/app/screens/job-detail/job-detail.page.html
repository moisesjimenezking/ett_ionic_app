<app-menu>
  <ion-header mode="ios" [translucent]="false" class="ion-no-border">
    <ion-toolbar color="false" class="mt-4 mb-8 bg-background">
      <div class="flex justify-between mx-[10px] mb-[20xp]">
        <span (click)="goBack()" class="material-icons" style="color: #fff; font-size: 32px">
          chevron_left
        </span>
        <ion-text class="flex-1 text-center whiteColor20Bold ellipseText"
          style="max-width: 80%; -webkit-line-clamp: 1; text-align: center">
          Detalles de la oferta
        </ion-text>
        <div style="position: relative">
          <ion-buttons style="background-color: #121212; color: white;">
            <ion-menu-button menu="app-menu" class="menu-button-custom"></ion-menu-button>
          </ion-buttons>
        </div>
        <!-- <ion-icon id=openEditJobs *ngIf="account === 'COMPANY'" name="create-outline" color="whiteColor" style="font-size: 30px;"></ion-icon> -->
      </div>
      <ion-modal mode="md" #openEditJobs trigger="openEditJobs" style="--border-radius: 10px">
        <ng-template>
          <div class="column">
            <ion-text class="blackColor18Medium" style="text-align: center; margin: 20px; margin-bottom: 30px">
              Editar Registro
            </ion-text>

            <div class="margin20" style="margin-top: 10px">
              <div class="textFieldWrapper">
                <ion-input mode="ios" placeholder="Titulo de la oferta" class="textField lightColor16Medium"
                  style="min-height: 20px" [(ngModel)]="title">
                </ion-input>
              </div>
              <ion-text color="danger" *ngIf="!title && showErrorMessage">Este campo es obligatorio</ion-text>
            </div>

            <div class="margin20" style="margin-top: 10px">
              <div class="textFieldWrapper">
                <ion-select interface="auto" placeholder="Horario de Trabajo" class="textField blackColor16Medium"
                  style="min-height: 20px" [(ngModel)]="type_time">
                  <ion-select-option value="Tiempo completo">Tiempo completo</ion-select-option>
                  <ion-select-option value="Medio tiempo">Medio tiempo</ion-select-option>
                  <ion-select-option value="Freelance">Freelance</ion-select-option>
                </ion-select>
              </div>
              <ion-text color="danger" *ngIf="!type_time && showErrorMessage">Este campo es obligatorio</ion-text>
            </div>

            <div class="margin20" style="margin-top: 10px">
              <div class="textFieldWrapper">
                <ion-input mode="ios" type="text" placeholder="Salario" [(ngModel)]="amount"
                  (ionChange)="formatAmount()"></ion-input>
              </div>
              <ion-text color="danger" *ngIf="!amount && showErrorMessage">Este campo es obligatorio</ion-text>
            </div>

            <div class="margin20" style="margin-top: 10px">
              <div class="textFieldWrapper">
                <ion-input mode="ios" type="text" placeholder="Ubicación" [(ngModel)]="location"></ion-input>
              </div>
            </div>

            <div class="margin20" style="margin-top: 10px">
              <div class="textFieldWrapper">
                <ion-input mode="ios" type="text" placeholder="Descripción" [(ngModel)]="description"></ion-input>
              </div>
            </div>

            <div class="margin20" style="margin-top: 10px">
              <div class="textFieldWrapper">
                <ion-input mode="ios" placeholder="Requerimientos" class="textField lightColor16Medium"
                  style="min-height: 20px" [(ngModel)]="newItem" (keyup.enter)="addItemToList()"></ion-input>
              </div>
              <ion-chip *ngFor="let item of requeriment">
                <ion-label>{{ item }}</ion-label>
                <ion-icon name="close-circle" (click)="removeItem(item)"></ion-icon>
              </ion-chip>
            </div>



            <div class="row">
              <div (click)="openEditJobs.dismiss()" class="center dialogButton" style="margin-right: 1px">
                <ion-text class="whiteColor18SemiBold"> Cancelar </ion-text>
              </div>
              <div (click)="saveAndCloseModal()" class="center dialogButton" style="margin-left: 1px">
                <ion-text class="whiteColor18SemiBold"> Guardar </ion-text>
              </div>
            </div>
          </div>
        </ng-template>
      </ion-modal>
    </ion-toolbar>
  </ion-header>

  <ion-content [fullscreen]="true" style="--background: hsl(var(--background))">
    <div class="bg-muted m-auto 
  w-[95%] h-full max-h-[95%] max-w-[95%] rounded-xl p-5 
  relative overflow-hidden overflow-y-auto
  flex flex-col" style="word-wrap: break-word;">
      <div class="flex justify-between">
        <div class="flex flex-col gap-1.5 justify-between text-primary-foreground">
          <ion-text class="text-xl leading-5 font-medium">
            {{dataJobs.title}}
          </ion-text>
          <ion-text class="text-xs text-primary-foreground/90">
            {{dataJobs.location}}
          </ion-text>
        </div>
        <div class="column">
          <ion-text class="text-sm text-primary-foreground font-medium">
            Bs.{{dataJobs.amount}}/mes
          </ion-text>
        </div>
      </div>
      <ion-chip class="bg-foreground mt-5 py-1 px-7 text-center max-w-fit rounded-full">
        <ion-text class="text-destructive text-sm">{{ dataJobs.type_time }}</ion-text>
      </ion-chip>
      <div class="rowAlignCenter" style="justify-content: space-between; margin-top: 20px;">
        <ion-text class="textAux"
          style="color: #FFFFFF; font-size: 18px; flex: 1; -webkit-line-clamp: 1; line-clamp: 1;">
          Acerca del empleo
        </ion-text>
      </div>
      <div class="rowAlignCenter" style="justify-content: space-between; margin-top: 20px;">
        <ion-text class="textAux"
          style="color: #FFFFFF; font-size: 12px; flex: 1; text-align: justify; word-break: break-word; overflow: hidden; white-space: normal;">
          {{ dataJobs.description }}
        </ion-text>
      </div>
      <div class="rowAlignCenter" style="justify-content: space-between; margin-top: 20px;">
        <ion-text class="textAux"
          style="color: #FFFFFF; font-size: 18px; flex: 1; -webkit-line-clamp: 1; line-clamp: 1;">
          Requisitos
        </ion-text>
      </div>
      <div *ngFor="let item of dataJobs.requeriment" class="row" style="margin-top: 10px;">
        <div class="bullet"></div>
        <ion-text class="textAux" style="flex: 1; color: #FFFFFF; font-size: 12px; margin-left: 5px;">
          {{ item }}
        </ion-text>
      </div>
      <div class="w-full mt-auto flex justify-between gap-2 pt-5">
        <ion-chip *ngIf="!enableButton" id="openModalMessage"
          class="bg-muted flex justify-center items-center w-full h-12">
          <ion-text class="textAux" style="color: white; text-align: center;">Enviar mensaje</ion-text>
        </ion-chip>
        <ion-chip id="openModal" [class]="utils.cn(
        'flex justify-center items-center w-full h-12 rounded-3xl',
        enableButton ? 'bg-foreground/90 cursor-not-allowed': 'bg-primary cursor-pointer' 
      )" (click)="!enableButton && applicateJob()">
          <ion-text [class]="utils.cn(
          'text-[16px] text-center',
          enableButton ? 'text-primary/90 font-semibold': 'text-primary-foreground'
        )">
            {{ buttonText }}
          </ion-text>
        </ion-chip>
      </div>
    </div>
  </ion-content>

  <ion-modal mode="md" #modal trigger="openModalMessage" style="--border-radius: 5px; --background: #2C2C2C;">
    <ng-template>
      <div class="column" style="background-color: #2C2C2C;">
        <div class="center column" style="margin: 0 20px; margin-bottom: 0px">
          <ion-text class="textAux"
            style="margin-bottom: 20px; text-align: center; margin-top: 20px; font-size: 22px; color:#FFFFFF">
            Enviar mensaje
          </ion-text>
        </div>
        <div class="textFieldWrapper" style="background-color: #2C2C2C;">
          <ion-text class="textAux" style="color: #FFFBF7; margin-left:20px"> Mensaje </ion-text>
          <ion-chip class="customChip" style="margin-top: 10px; background-color: #2C2C2C">
            <ion-input mode="ios" placeholder="Escribe tu mensaje" class="textAux"
              placeholder="Escribe tu mensaje aquí..."
              style="color: #FFFFFF; font-size: 12px; margin-bottom: 10px; resize: none; width: 100%; max-width: 100%; min-height: 50px;"
              [(ngModel)]="message" inputmode="text">
            </ion-input>
          </ion-chip>
        </div>

        <!-- Aquí aplicamos los cambios -->
        <div style="display: flex; justify-content: center; margin:10px">
          <ion-chip (click)="modal.dismiss()"
            style="background-color: #2C2C2C; display: flex; justify-content: center; align-items: center; width: 45%; margin-right: 10px;">
            <ion-text class="textAux" style="color: white; text-align: center;">
              Cancelar
            </ion-text>
          </ion-chip>
          <ion-chip (click)="sendMessage(message);modal.dismiss()"
            style="background-color: #2758BF; display: flex; justify-content: center; align-items: center; width: 45%; margin-left: 10px;">
            <ion-text class="textAux" style="color: white; text-align: center;">
              Enviar
            </ion-text>
          </ion-chip>
        </div>
      </div>

    </ng-template>
  </ion-modal>
</app-menu>
<!-- <ion-footer mode="ios" style="background-color: var(--whiteColor)">
  <div *ngIf="account === 'PERSON'">
    <div id="openModal" class="center button" [ngStyle]="{'background-color': enableButton ? '#cccccc' : '#2758BF'}" (click)="!enableButton && applicateJob()" [attr.disabled]="enableButton ? true : null">
        <ion-text class="whiteColor18SemiBold"> {{ buttonText }} </ion-text>
    </div>
    <div id="openModalMessage" class="center button" style="background-color:#2758BF">
      <ion-text class="whiteColor18SemiBold"> Enviar un mensaje </ion-text>
    </div>
  </div>
  <div *ngIf="account === 'COMPANY'">
    <div id="openListUser" class="center button" [ngStyle]="{'background-color': dataJobs.appliedJobs.length === 0 ? '#cccccc' : '#2758BF'}" [attr.disabled]="dataJobs.appliedJobs.length === 0 ? true : null">
        <ion-text class="whiteColor18SemiBold"> Ver candidatos </ion-text>
    </div>
  </div>

</ion-footer> -->