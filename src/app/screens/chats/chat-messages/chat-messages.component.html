<ng-container *ngIf="!isLoading;else LoadingState">
  <ion-list class="bg-muted rounded-lg divide-y-[.25px] divide-destructive-foreground px-5">
    <ng-container *ngFor="let item of messages;let i=index;">
      <div class="flex items-center gap-4 py-5" (click)="onMessageSelected.emit(item)">
        <ng-image [src]="item.sourceImage ? item.sourceImage : 'assets/images/profile.png'" width="56px" height="56px" class="min-w-14 size-14 rounded-full"
          alt="Chat Icon" />
        <div class="flex flex-1 flex-col justify-center gap-1 text-primary-foreground">
          <p class="text-primary-foreground text-xl">{{item.sourceName}}</p>
          <div class="flex justify-between items-center gap-1 text-sm">
            <p class="text-muted-foreground text-ellipsis line-clamp-1 flex-1 m-0">
              {{item.lastMsg}}
            </p>
            <p class="text-muted-foreground m-0">
              {{item.lastMsgTime}}
            </p>
          </div>
        </div>
      </div>
    </ng-container>

  </ion-list>
</ng-container>

<ng-template #LoadingState>
  <ion-list class="bg-destructive rounded-lg divide-y-[.25px] divide-destructive-foreground px-5 animate-pulse">
    <ng-container *ngIf="isLoading">
      <div class="flex items-center gap-4 py-5 w-full h-[120px]" *ngFor="let item of [1,2,4,5]">
        <div class="size-14 rounded-full bg-muted">

        </div>
        <div class="flex-1 flex flex-col gap-2 justify-center">
          <div class="h-3.5 w-24 rounded-lg bg-muted"></div>
          <div class="flex gap-1 items-center">
            <div class="flex-1 h-3.5 rounded-lg bg-muted"></div>
            <div class="w-12 h-3.5 rounded-lg bg-muted">

            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </ion-list>
</ng-template>