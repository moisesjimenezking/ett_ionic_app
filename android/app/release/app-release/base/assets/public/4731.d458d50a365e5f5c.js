"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4731],{7112:(re,Q,i)=>{i.d(Q,{G:()=>ee});var U=i(467),A=i(1626),l=i(9437),a=i(8810),y=i(980),X=i(8141),n=i(6276),q=i(8974),Z=i(3833);let ee=(()=>{var E;class H{constructor(r,e,t,s,o){this.http=r,this.loadingController=e,this.alertController=t,this.router=s,this.zone=o,this.apiUrl="https://ettapi.com",this.options={headers:new A.Lr({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}),timeout:2e4},localStorage.setItem("rute",this.apiUrl)}goTo(r){this.router.navigateByUrl(r)}redirect(r){return this.router.createUrlTree([r])}showSpinner(){var r=this;return(0,U.A)(function*(){yield(yield r.loadingController.create({message:"Cargando..."})).present()})()}hideSpinner(){var r=this;return(0,U.A)(function*(){yield r.loadingController.dismiss()})()}presentAlert(r){var e=this;return(0,U.A)(function*(){yield(yield e.alertController.create({header:"Ups!",message:r,buttons:["OK"]})).present()})()}getData(){return this.http.get(`${this.apiUrl}/`)}postToken(r){return r.fcm_code="ANDROID",console.log(r),this.showSpinner(),this.http.post(`${this.apiUrl}/token`,r,this.options).pipe((0,l.W)(e=>{let t="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";return 201!==e.status&&e.error&&e.error.message&&(t=e.error.message),this.hideSpinner(),this.presentAlert(t),(0,a.$)(()=>new Error(t))}),(0,y.j)(()=>{this.hideSpinner()})).subscribe(e=>{var t,s,o,u,c,p,d,_,g,h,m,v,$,S,f,I,O,P,M,x,D,C,z,T,W,j,K,k,B,R,w,N,b,L,J,V,F,G,Y;localStorage.setItem("token",e.token),localStorage.setItem("fullname",e.user.fullname),localStorage.setItem("email",e.user.email),localStorage.setItem("icon_profile",null!==(t=null===(s=e.user)||void 0===s?void 0:s.icon)&&void 0!==t?t:""),localStorage.setItem("icon_front",null!==(o=null===(u=e.user)||void 0===u?void 0:u.icon_front)&&void 0!==o?o:""),localStorage.setItem("social_link",null!==(c=e.user)&&void 0!==c&&c.social_link?JSON.stringify(e.user.social_link):""),localStorage.setItem("specialization",null!==(p=null===(d=e.user)||void 0===d?void 0:d.specialization)&&void 0!==p?p:""),localStorage.setItem("phone",null!==(_=null===(g=e.user)||void 0===g?void 0:g.phone)&&void 0!==_?_:""),localStorage.setItem("address",null!==(h=null===(m=e.user)||void 0===m?void 0:m.address)&&void 0!==h?h:""),localStorage.setItem("sex",null!==(v=null===($=e.user)||void 0===$?void 0:$.sex)&&void 0!==v?v:""),localStorage.setItem("civil_status",null!==(S=null===(f=e.user)||void 0===f?void 0:f.civil_status)&&void 0!==S?S:""),localStorage.setItem("family_responsibilities",null!==(I=null===(O=e.user)||void 0===O?void 0:O.family_responsibilities)&&void 0!==I?I:""),localStorage.setItem("birthdate",null!==(P=null===(M=e.user)||void 0===M?void 0:M.birthdate)&&void 0!==P?P:""),localStorage.setItem("identification",JSON.stringify({text:null!==(x=e.user.identification_text)&&void 0!==x?x:"",img:null!==(D=e.user.identification_img)&&void 0!==D?D:""})),localStorage.setItem("license",JSON.stringify({text:null!==(C=e.user.license_text)&&void 0!==C?C:"",img:null!==(z=e.user.license_img)&&void 0!==z?z:""})),localStorage.setItem("rif",JSON.stringify({text:null!==(T=e.user.rif_text)&&void 0!==T?T:"",img:null!==(W=e.user.rif_img)&&void 0!==W?W:""})),localStorage.setItem("level_study",null!==(j=null===(K=e.user)||void 0===K?void 0:K.level_study)&&void 0!==j?j:""),localStorage.setItem("blood_type",null!==(k=null===(B=e.user)||void 0===B?void 0:B.blood_type)&&void 0!==k?k:""),localStorage.setItem("allergies",null!==(R=null===(w=e.user)||void 0===w?void 0:w.allergies)&&void 0!==R?R:""),localStorage.setItem("accountType",null!==(N=null===(b=e.user)||void 0===b||null===(b=b.account)||void 0===b?void 0:b.toUpperCase())&&void 0!==N?N:"PERSON"),localStorage.setItem("user_id",e.user.id),localStorage.setItem("location",null!==(L=null===(J=e.user)||void 0===J?void 0:J.location)&&void 0!==L?L:""),localStorage.setItem("experienceYear",null!==(V=null===(F=e.user)||void 0===F?void 0:F.experience)&&void 0!==V?V:""),localStorage.setItem("about",null!==(G=null===(Y=e.user)||void 0===Y?void 0:Y.about)&&void 0!==G?G:""),this.goTo("PERSON"===localStorage.getItem("accountType")?"bottom-tab-bar/home":"bottom-tab-bar-company/home")})}getVerificEmail(r){let e=new A.Nl;for(let t in r)e=e.append(t,r[t]);return this.http.get(`${this.apiUrl}/verific_email`,{params:e}).pipe((0,l.W)(t=>{let s="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";return 200!==t.status&&t.error&&t.error.message&&(s=t.error.message),this.presentAlert(s),(0,a.$)(()=>new Error(s))}),(0,y.j)(()=>{this.hideSpinner()})).subscribe(t=>{var s,o,u,c,p,d,_,g,h,m,v,$,S,f,I;localStorage.setItem("fullname",t.fullname),localStorage.setItem("email",t.email),localStorage.setItem("icon_profile",null!==(s=null===(o=t.user)||void 0===o?void 0:o.icon)&&void 0!==s?s:""),localStorage.setItem("icon_front",null!==(u=null===(c=t.user)||void 0===c?void 0:c.icon_front)&&void 0!==u?u:""),localStorage.setItem("social_link",JSON.stringify(null!==(p=null===(d=t.user)||void 0===d?void 0:d.social_link)&&void 0!==p?p:"")),localStorage.setItem("specialization",null!==(_=null===(g=t.user)||void 0===g?void 0:g.specialization)&&void 0!==_?_:""),localStorage.setItem("phone",null!==(h=t.phone)&&void 0!==h?h:""),localStorage.setItem("address",null!==(m=t.address)&&void 0!==m?m:""),localStorage.setItem("sex",null!==(v=t.sex)&&void 0!==v?v:""),localStorage.setItem("civil_status",null!==($=t.civil_status)&&void 0!==$?$:""),localStorage.setItem("family_responsibilities",t.family_responsibilities),localStorage.setItem("birthdate",t.birthdate),localStorage.setItem("level_study",t.level_study),localStorage.setItem("blood_type",t.blood_type),localStorage.setItem("allergies",t.allergies),localStorage.setItem("user_id",t.id),localStorage.setItem("location",null!==(S=t.location)&&void 0!==S?S:""),localStorage.setItem("experienceYear",null!==(f=t.experience)&&void 0!==f?f:""),localStorage.setItem("about",null!==(I=t.about)&&void 0!==I?I:"")})}getVerificEmailFalse(r){let e=new A.Nl,t=0;for(let s in r)e=e.append(s,r[s]);this.http.get(`${this.apiUrl}/verific_email`,{params:e}).pipe((0,l.W)(s=>(200===s.status&&this.presentAlert("Este email ya se encuentra registrado"),(0,a.$)(()=>new Error("Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.")))),(0,y.j)(()=>{})).subscribe(s=>{t=s.id,0!=t&&this.presentAlert("Este email ya se encuentra registrado")})}postUser(r){return this.showSpinner(),this.http.post(`${this.apiUrl}/register`,r,this.options).pipe((0,l.W)(e=>{let t="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";return 201!==e.status&&e.error&&e.error.message&&(t=e.error.message),this.hideSpinner(),this.presentAlert(t),(0,a.$)(()=>new Error(t))}),(0,X.M)(e=>{localStorage.setItem("token",e.token),localStorage.setItem("fullname",e.user.fullname),localStorage.setItem("email",e.user.email),localStorage.setItem("phone",e.user.phone),localStorage.setItem("accountType",e.user.account),localStorage.setItem("user_id",e.user.id),this.goTo("PERSON"===localStorage.getItem("accountType")?"bottom-tab-bar/home":"bottom-tab-bar-company/home"),this.hideSpinner()}))}allJobsApi(r,e){return this.http.get(`${this.apiUrl}/jobs`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")},params:r}).pipe((0,l.W)(s=>{let o="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";return 200!==s.status&&s.error&&s.error.message&&(o=s.error.message),null!=e&&e.showError&&this.presentAlert(o),(0,a.$)(()=>s)}))}getChat(r){return this.http.get(`${this.apiUrl}/chats`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")},params:r})}postJobs(r){return this.http.post(`${this.apiUrl}/jobs`,r,this.options).pipe((0,l.W)(e=>{let t="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";return 201!==e.status&&e.error&&e.error.message&&(t=e.error.message),this.presentAlert(t),(0,a.$)(()=>new Error(t))}),(0,y.j)(()=>{}))}postChats(r){return this.http.post(`${this.apiUrl}/chats`,r,this.options)}putJobs(r){return this.http.put(`${this.apiUrl}/jobs`,r,this.options).pipe((0,l.W)(e=>{let t="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";return 201!==e.status&&e.error&&e.error.message&&(t=e.error.message),this.presentAlert(t),(0,a.$)(()=>new Error(t))}),(0,y.j)(()=>{}))}postMessage(r){return this.http.post(`${this.apiUrl}/messages`,r,this.options)}putViewsAll(r){const e=this.http.put(`${this.apiUrl}/viewsAll`,r,this.options);return e.subscribe({error:t=>{let s="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";201!==t.status&&t.error&&t.error.message&&(s=t.error.message),this.presentAlert(s)},complete:()=>{}}),e}putUser(r){return this.http.put(`${this.apiUrl}/user`,r,this.options).pipe((0,l.W)(t=>{let s="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";return 201!==t.status&&t.error&&t.error.message&&(s=t.error.message),304===t.status&&(s="Sin cambios."),this.presentAlert(s),(0,a.$)(()=>t)}))}getUser(){const r=this.http.get(`${this.apiUrl}/user`,this.options);return r.subscribe({error:e=>{let t="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";200!==e.status&&e.error&&e.error.message&&(t=e.error.message),this.presentAlert(t)},complete:()=>{}}),r}postJobsApplied(r){return this.http.post(`${this.apiUrl}/applied_jobs`,r,this.options).pipe((0,l.W)(t=>{let s="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";return 201!==t.status&&t.error&&t.error.message&&(s=t.error.message),this.presentAlert(s),(0,a.$)(()=>t)}))}getWallet(){const r=this.http.get(`${this.apiUrl}/wallet`,this.options);return r.subscribe({error:e=>{let t="Error al realizar la solicitud. Por favor, int\xe9ntalo de nuevo.";200!==e.status&&e.error&&e.error.message&&(t=e.error.message),this.presentAlert(t)},complete:()=>{}}),r}}return(E=H).\u0275fac=function(r){return new(r||E)(n.KVO(A.Qq),n.KVO(q.Xi),n.KVO(q.hG),n.KVO(Z.Ix),n.KVO(n.SKi))},E.\u0275prov=n.jDH({token:E,factory:E.\u0275fac,providedIn:"root"}),H})()}}]);