"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6205],{6205:(y,u,i)=>{i.r(u),i.d(u,{MessagePageModule:()=>w});var p=i(6814),g=i(95),h=i(4173),r=i(3498),m=i(9862),c=i(209),e=i(6689),M=i(5472);const f=["scrollContainer"],v=["textArea"];function x(s,l){if(1&s&&(e.TgZ(0,"div",19)(1,"div",20)(2,"ion-text",21),e._uU(3),e.qZA()()()),2&s){const a=l.$implicit;e.Udp("align-items",a.isSender?"flex-end":"flex-start"),e.xp6(1),e.Udp("background",a.isSender?"#2758BF":"var(--extraLightGrayColor)"),e.xp6(1),e.Tol(a.isSender?"whiteColor16Regular":"grayColor16Regular"),e.xp6(1),e.hij(" ",a.message," ")}}const C=function(){return{standalone:!0}},b=[{path:"",component:(()=>{var s;class l{constructor(o,t,n,d){this.navCtrl=o,this.router=t,this.apiMessage=n,this.cdr=d,this.newMsgRegister={},this.newMsg=""}ngOnInit(){this.userMessages=this.details("messages"),this.dataChat=this.details("all"),this.viewsAll()}details(o){const t=localStorage.getItem("messages");return t?"messages"===o?JSON.parse(t).messages:JSON.parse(t):{}}ngAfterViewChecked(){this.scrollToBottom()}stablishUrlPic(o){let t=o;return null===t||""===t||"null"===t?`${localStorage.getItem("rute")}/img/iconHuman.jpg`:`${localStorage.getItem("rute")}/img/${t}`}searchIcon(o){return this.stablishUrlPic(o)}scrollToBottom(){this.scrollContainer.nativeElement.scroll({top:this.scrollContainer.nativeElement.scrollHeight,left:0,behavior:"smooth"})}goBack(){this.navCtrl.back()}viewsAll(){this.apiMessage.putViewsAll({chats_id:this.dataChat.id})}goTo(o){this.router.navigateByUrl(o)}backspace(){this.goTo("PERSON"===localStorage.getItem("accountType")?"bottom-tab-bar/chats":"bottom-tab-bar-company/chats")}addMessage(){if(this.newMsg){const o={message:this.newMsg,chats_id:this.dataChat.id};this.newMsg="",setTimeout(()=>{this.apiMessage.postMessage(o).subscribe(t=>{this.userMessages.push(t),this.cdr.detectChanges()})},50)}}}return(s=l).\u0275fac=function(o){return new(o||s)(e.Y36(M.SH),e.Y36(c.F0),e.Y36(h.s),e.Y36(e.sBO))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-message"]],viewQuery:function(o,t){if(1&o&&(e.Gf(f,5),e.Gf(v,5),e.Gf(r.W2,5)),2&o){let n;e.iGM(n=e.CRH())&&(t.scrollContainer=n.first),e.iGM(n=e.CRH())&&(t.textArea=n.first),e.iGM(n=e.CRH())&&(t.content=n.first)}},decls:21,vars:8,consts:[["mode","ios",1,"ion-no-border",3,"translucent"],["color","false",2,"background-color","#2758BF"],[1,"rowAlignCenter","margin20","center",2,"justify-content","space-between","margin-right","15px"],[1,"rowAlignCenter",2,"flex","1"],[1,"material-icons",2,"color","white","font-size","28px",3,"click"],[1,"imageOverflow","sourceLogo",3,"src"],[1,"column",2,"flex","1"],[1,"whiteColor19SemiBold","ellipseText",2,"-webkit-line-clamp","1"],[1,"custom-background",3,"fullscreen"],[1,"rounded-top-corners",2,"background-color","rgb(255, 255, 255)","height","100%"],[2,"height","100%","margin-top","20px","padding-top","20px","overflow-y","auto"],["scrollContainer",""],["class","column","style","margin: 10px 10px; margin-bottom: 20px;",3,"align-items",4,"ngFor","ngForOf"],["mode","ios",2,"background-color","var(--whiteColor)"],[1,"footer"],["mode","ios","placeholder","Escribe un mensaje","rows","1",1,"whiteColor14Regular",2,"--placeholder-color","var(--grayColor)","--placeholder-opacity","1","--color","black",3,"ngModel","ngModelOptions","ngModelChange"],["textArea",""],[1,"center","circle40"],["name","send",2,"font-size","20px","color","#2758BF",3,"click"],[1,"column",2,"margin","10px 10px","margin-bottom","20px"],[2,"padding","10px","border-radius","10px","max-width","85%"],[2,"white-space","pre-line"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"div",2)(3,"div",3)(4,"span",4),e.NdJ("click",function(){return t.backspace()}),e._uU(5," keyboard_backspace "),e.qZA(),e._UZ(6,"ion-img",5),e.TgZ(7,"div",6)(8,"ion-text",7),e._uU(9),e.qZA()()()()()(),e.TgZ(10,"ion-content",8)(11,"div",9)(12,"div",10,11),e.YNc(14,x,4,7,"div",12),e.qZA()()(),e.TgZ(15,"ion-footer",13)(16,"div",14)(17,"ion-textarea",15,16),e.NdJ("ngModelChange",function(d){return t.newMsg=d}),e.qZA(),e.TgZ(19,"div",17)(20,"ion-icon",18),e.NdJ("click",function(){return t.addMessage()}),e.qZA()()()()),2&o&&(e.Q6J("translucent",!1),e.xp6(6),e.Q6J("src",t.searchIcon(t.dataChat.sourceImage)),e.xp6(3),e.hij(" ",t.dataChat.sourceName," "),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(4),e.Q6J("ngForOf",t.userMessages),e.xp6(3),e.Q6J("ngModel",t.newMsg)("ngModelOptions",e.DdM(7,C)))},dependencies:[p.sg,g.JJ,g.On,r.W2,r.fr,r.Gu,r.gu,r.Xz,r.yW,r.g2,r.sr,r.j9],styles:[".sourceLogo[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:23px;margin-left:20px;margin-right:12px}.footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:5px 20px;background-color:var(--extraLightGrayColor);margin:20px;border-radius:10px}.custom-background[_ngcontent-%COMP%]{--background: #2758BF}.rounded-top-corners[_ngcontent-%COMP%]{border-top-left-radius:20px;border-top-right-radius:20px;overflow:hidden;background-color:#2758bf}"]}),l})()}];let P=(()=>{var s;class l{}return(s=l).\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[c.Bz.forChild(b),c.Bz]}),l})(),w=(()=>{var s;class l{}return(s=l).\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[h.s],imports:[p.ez,g.u5,r.Pc,P,m.JF]}),l})()}}]);