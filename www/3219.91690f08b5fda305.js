"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3219],{3219:(k,u,i)=>{i.r(u),i.d(u,{MessagePageModule:()=>P});var m=i(177),g=i(4341),p=i(7112),n=i(5933),h=i(1626),c=i(6565),e=i(6276),M=i(7157);const f=["scrollContainer"],v=["textArea"];function b(o,l){if(1&o&&(e.j41(0,"div",19)(1,"div",20)(2,"ion-text",21),e.EFF(3),e.k0s()()()),2&o){const a=l.$implicit;e.xc7("align-items",a.isSender?"flex-end":"flex-start"),e.R7$(1),e.xc7("background",a.isSender?"#2758BF":"var(--extraLightGrayColor)"),e.R7$(1),e.HbH(a.isSender?"whiteColor16Regular":"grayColor16Regular"),e.R7$(1),e.SpI(" ",a.message," ")}}const C=function(){return{standalone:!0}},x=[{path:"",component:(()=>{var o;class l{constructor(s,t,r,d){this.navCtrl=s,this.router=t,this.apiMessage=r,this.cdr=d,this.newMsgRegister={},this.newMsg=""}ngOnInit(){this.userMessages=this.details("messages"),this.dataChat=this.details("all"),this.viewsAll()}details(s){const t=localStorage.getItem("messages");return t?"messages"===s?JSON.parse(t).messages:JSON.parse(t):{}}ngAfterViewChecked(){this.scrollToBottom()}stablishUrlPic(s){let t=s;return null===t||""===t||"null"===t?`${localStorage.getItem("rute")}/img/iconHuman.jpg`:`${localStorage.getItem("rute")}/img/${t}`}searchIcon(s){return this.stablishUrlPic(s)}scrollToBottom(){this.scrollContainer.nativeElement.scroll({top:this.scrollContainer.nativeElement.scrollHeight,left:0,behavior:"smooth"})}goBack(){this.navCtrl.back()}viewsAll(){this.apiMessage.putViewsAll({chats_id:this.dataChat.id})}goTo(s){this.router.navigateByUrl(s)}backspace(){this.goTo("PERSON"===localStorage.getItem("accountType")?"bottom-tab-bar/chats":"bottom-tab-bar-company/chats")}addMessage(){if(this.newMsg){const s={message:this.newMsg,chats_id:this.dataChat.id};this.newMsg="",setTimeout(()=>{this.apiMessage.postMessage(s).subscribe(t=>{this.userMessages.push(t),this.cdr.detectChanges()})},50)}}}return(o=l).\u0275fac=function(s){return new(s||o)(e.rXU(M.q9),e.rXU(c.Ix),e.rXU(p.G),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-message"]],viewQuery:function(s,t){if(1&s&&(e.GBs(f,5),e.GBs(v,5),e.GBs(n.W9,5)),2&s){let r;e.mGM(r=e.lsd())&&(t.scrollContainer=r.first),e.mGM(r=e.lsd())&&(t.textArea=r.first),e.mGM(r=e.lsd())&&(t.content=r.first)}},decls:21,vars:8,consts:[["mode","ios",1,"ion-no-border",3,"translucent"],["color","false",2,"background-color","#2758BF"],[1,"rowAlignCenter","margin20","center",2,"justify-content","space-between","margin-right","15px"],[1,"rowAlignCenter",2,"flex","1"],[1,"material-icons",2,"color","white","font-size","28px",3,"click"],[1,"imageOverflow","sourceLogo",3,"src"],[1,"column",2,"flex","1"],[1,"whiteColor19SemiBold","ellipseText",2,"-webkit-line-clamp","1"],[1,"custom-background",3,"fullscreen"],[1,"rounded-top-corners",2,"background-color","rgb(255, 255, 255)","height","100%"],[2,"height","100%","margin-top","20px","padding-top","20px","overflow-y","auto"],["scrollContainer",""],["class","column","style","margin: 10px 10px; margin-bottom: 20px;",3,"align-items",4,"ngFor","ngForOf"],["mode","ios",2,"background-color","var(--whiteColor)"],[1,"footer"],["mode","ios","placeholder","Escribe un mensaje","rows","1",1,"whiteColor14Regular",2,"--placeholder-color","var(--grayColor)","--placeholder-opacity","1","--color","black",3,"ngModel","ngModelOptions","ngModelChange"],["textArea",""],[1,"center","circle40"],["name","send",2,"font-size","20px","color","#2758BF",3,"click"],[1,"column",2,"margin","10px 10px","margin-bottom","20px"],[2,"padding","10px","border-radius","10px","max-width","85%"],[2,"white-space","pre-line"]],template:function(s,t){1&s&&(e.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"div",2)(3,"div",3)(4,"span",4),e.bIt("click",function(){return t.backspace()}),e.EFF(5," keyboard_backspace "),e.k0s(),e.nrm(6,"ion-img",5),e.j41(7,"div",6)(8,"ion-text",7),e.EFF(9),e.k0s()()()()()(),e.j41(10,"ion-content",8)(11,"div",9)(12,"div",10,11),e.DNE(14,b,4,7,"div",12),e.k0s()()(),e.j41(15,"ion-footer",13)(16,"div",14)(17,"ion-textarea",15,16),e.bIt("ngModelChange",function(d){return t.newMsg=d}),e.k0s(),e.j41(19,"div",17)(20,"ion-icon",18),e.bIt("click",function(){return t.addMessage()}),e.k0s()()()()),2&s&&(e.Y8G("translucent",!1),e.R7$(6),e.Y8G("src",t.searchIcon(t.dataChat.sourceImage)),e.R7$(3),e.SpI(" ",t.dataChat.sourceName," "),e.R7$(1),e.Y8G("fullscreen",!0),e.R7$(4),e.Y8G("ngForOf",t.userMessages),e.R7$(3),e.Y8G("ngModel",t.newMsg)("ngModelOptions",e.lJ4(7,C)))},dependencies:[m.Sq,g.BC,g.vS,n.W9,n.M0,n.eU,n.iq,n.KW,n.IO,n.nc,n.ai,n.Gw],styles:[".sourceLogo[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:23px;margin-left:20px;margin-right:12px}.footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:5px 20px;background-color:var(--extraLightGrayColor);margin:20px;border-radius:10px}.custom-background[_ngcontent-%COMP%]{--background: #2758BF}.rounded-top-corners[_ngcontent-%COMP%]{border-top-left-radius:20px;border-top-right-radius:20px;overflow:hidden;background-color:#2758bf}"]}),l})()}];let w=(()=>{var o;class l{}return(o=l).\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[c.iI.forChild(x),c.iI]}),l})(),P=(()=>{var o;class l{}return(o=l).\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({providers:[p.G],imports:[m.MD,g.YN,n.bv,w,h.q1]}),l})()}}]);